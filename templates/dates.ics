BEGIN:VCALENDAR
PRODID:-//XLDB2017 Calendar//EN
VERSION:2.0
BEGIN:VTIMEZONE
TZID:/freeassociation.sourceforge.net/Tzfile/Europe/Paris
BEGIN:STANDARD
TZNAME:CET
DTSTART:19701030T030000
RRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=10
TZOFFSETFROM:+0200
TZOFFSETTO:+0100
END:STANDARD
BEGIN:DAYLIGHT
TZNAME:CEST
DTSTART:19700327T020000
RRULE:FREQ=YEARLY;BYDAY=-1SU;BYMONTH=3
TZOFFSETFROM:+0100
TZOFFSETTO:+0200
END:DAYLIGHT
END:VTIMEZONE
{%-if dates-%}
{%-for d in dates%}
BEGIN:VEVENT
{%-if "keynote" in d%}
UID:XLDB2017-{{d.keynote}}
SUMMARY:Keynote {{keynotes[d.keynote].gname}} {{keynotes[d.keynote].fname}}
{%-else%}
{%-if "session" in d%}
UID:XLDB2017-session{{d.session}}
{%-else%}
UID:XLDB2017-{{d.id}}
{%-endif%}
SUMMARY:{{d.title}}
{%-endif%}
CLASS:PUBLIC
CATEGORIES:XLDB2017
DTSTART;TZID=/freeassociation.sourceforge.net/Tzfile/Europe/Paris:{{d.start|date("%Y%m%d","%Y%m%dT%H%M%S")}}
{%-if d.end%}
DTEND;TZID=/freeassociation.sourceforge.net/Tzfile/Europe/Paris:{{d.end|date("%Y%m%d","%Y%m%dT%H%M%S")}}
{%-else%}
DTEND;TZID=/freeassociation.sourceforge.net/Tzfile/Europe/Paris:{{d.start|next_day|date("%Y%m%d","%Y%m%dT%H%M%S")}}
{%-endif%}
{%-if d.place%}
LOCATION:{{d.place}}
{%-endif%}
END:VEVENT
{%-endfor%}
{%-endif%}
END:VCALENDAR
